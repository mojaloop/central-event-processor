<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="739.8px" preserveAspectRatio="none" style="width:534px;height:739px;" version="1.1" viewBox="0 0 534 739" width="534.6px" zoomAndPan="magnify"><defs><filter height="300%" id="fn06orztovj2x" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="1.2000000476837158"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="2.4000000953674316" dy="2.4000000953674316" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="8.4" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="128.4" x="203.85" y="14.1211">10.4. Notification Action Flow</text><rect fill="#FFFFE0" height="712.936" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="93" x="23.4" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64.8" x="37.5" y="28.234">Central Services</text><rect fill="#90EE90" height="712.936" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="389.1" x="117.6" y="20.693"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="132" x="246.15" y="28.234">Central Event Processing Service</text><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="66.9" y="467.0988"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="66.9" y="643.9629"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="608.3637" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="167.4" y="75.7723"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="576.791" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="252.3" y="103.1449"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="479.7" y="160.7039"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="479.7" y="292.8082"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="37.5727" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="479.7" y="362.9672"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="479.7" y="551.6309"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="604.1637" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="520.5" x="7.8" y="79.9723"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="542.4047" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="508.5" x="13.8" y="137.5313"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="326.9684" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="496.5" x="19.8" y="339.7945"/><rect fill="#FFFFFF" height="176.8641" style="stroke: none; stroke-width: 0.6000000238418579;" width="496.5" x="19.8" y="489.8988"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="100.3184" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="289.5" x="220.8" y="503.0719"/><rect fill="#FFFFFF" height="8.973" style="stroke: none; stroke-width: 0.6000000238418579;" width="289.5" x="220.8" y="594.4172"/><rect fill="#FFFFFF" height="8.973" style="stroke: none; stroke-width: 0.6000000238418579;" width="508.5" x="13.8" y="670.9629"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="69.6" x2="69.6" y1="69.7723" y2="694.336"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="170.4" x2="170.4" y1="69.7723" y2="694.336"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="255" x2="255" y1="69.7723" y2="694.336"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 5.0,5.0;" x1="482.7" x2="482.7" y1="69.7723" y2="694.336"/><rect fill="#FEFECE" filter="url(#fn06orztovj2x)" height="18.293" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="83.4" x="28.2" y="46.0793"/><rect fill="#FEFECE" filter="url(#fn06orztovj2x)" height="18.293" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="83.4" x="25.8" y="48.4793"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="75" x="30" y="60.8004">Notification-Topic</text><rect fill="#FEFECE" filter="url(#fn06orztovj2x)" height="18.293" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="83.4" x="28.2" y="693.736"/><rect fill="#FEFECE" filter="url(#fn06orztovj2x)" height="18.293" style="stroke: #A80036; stroke-width: 0.9000000357627869;" width="83.4" x="25.8" y="696.136"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="75" x="30" y="708.4571">Notification-Topic</text><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="97.2" x="120" y="68.0004">Central Event Processor</text><ellipse cx="170.4" cy="50.2793" fill="#FEFECE" filter="url(#fn06orztovj2x)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><polygon fill="#A80036" points="168,43.0793,171.6,40.0793,170.4,43.0793,171.6,46.0793,168,43.0793" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="97.2" x="120" y="701.8571">Central Event Processor</text><ellipse cx="170.4" cy="713.2289" fill="#FEFECE" filter="url(#fn06orztovj2x)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><polygon fill="#A80036" points="168,706.0289,171.6,703.0289,170.4,706.0289,171.6,709.0289,168,706.0289" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="226.8" y="68.0004">Action Agent</text><ellipse cx="255.3" cy="50.2793" fill="#FEFECE" filter="url(#fn06orztovj2x)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><polygon fill="#A80036" points="252.9,43.0793,256.5,40.0793,255.3,43.0793,256.5,46.0793,252.9,43.0793" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="53.4" x="226.8" y="701.8571">Action Agent</text><ellipse cx="255.3" cy="713.2289" fill="#FEFECE" filter="url(#fn06orztovj2x)" rx="7.2" ry="7.2" style="stroke: #A80036; stroke-width: 1.2000000476837158;"/><polygon fill="#A80036" points="252.9,706.0289,256.5,703.0289,255.3,706.0289,256.5,709.0289,252.9,706.0289" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="39.6" x="461.1" y="68.0004">CEP Store</text><path d="M471.9,38.2793 C471.9,32.2793 482.7,32.2793 482.7,32.2793 C482.7,32.2793 493.5,32.2793 493.5,38.2793 L493.5,53.8793 C493.5,59.8793 482.7,59.8793 482.7,59.8793 C482.7,59.8793 471.9,59.8793 471.9,53.8793 L471.9,38.2793 " fill="#FEFECE" filter="url(#fn06orztovj2x)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M471.9,38.2793 C471.9,44.2793 482.7,44.2793 482.7,44.2793 C482.7,44.2793 493.5,44.2793 493.5,38.2793 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><text fill="#000000" font-family="sans-serif" font-size="8.4" lengthAdjust="spacingAndGlyphs" textLength="39.6" x="461.1" y="701.8571">CEP Store</text><path d="M471.9,709.6289 C471.9,703.6289 482.7,703.6289 482.7,703.6289 C482.7,703.6289 493.5,703.6289 493.5,709.6289 L493.5,725.2289 C493.5,731.2289 482.7,731.2289 482.7,731.2289 C482.7,731.2289 471.9,731.2289 471.9,725.2289 L471.9,709.6289 " fill="#FEFECE" filter="url(#fn06orztovj2x)" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><path d="M471.9,709.6289 C471.9,715.6289 482.7,715.6289 482.7,715.6289 C482.7,715.6289 493.5,715.6289 493.5,709.6289 " fill="none" style="stroke: #000000; stroke-width: 0.9000000357627869;"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="66.9" y="467.0988"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="66.9" y="643.9629"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="608.3637" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="167.4" y="75.7723"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="576.791" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="252.3" y="103.1449"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="479.7" y="160.7039"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="479.7" y="292.8082"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="37.5727" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="479.7" y="362.9672"/><rect fill="#FFFFFF" filter="url(#fn06orztovj2x)" height="18" style="stroke: #A80036; stroke-width: 0.6000000238418579;" width="6" x="479.7" y="551.6309"/><path d="M7.8,79.9723 L81,79.9723 L81,84.1723 L75,90.1723 L7.8,90.1723 L7.8,79.9723 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="604.1637" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="520.5" x="7.8" y="79.9723"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="46.2" x="16.8" y="88.1133">Action Flow</text><polygon fill="#A80036" points="245.1,100.7449,251.1,103.1449,245.1,105.5449,247.5,103.1449" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="173.4" x2="248.7" y1="103.1449" y2="103.1449"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="177.6" y="100.2996">1</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="47.4" x="185.4" y="100.2996">Action event</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.3" x2="283.5" y1="120.7313" y2="120.7313"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="283.5" x2="283.5" y1="120.7313" y2="128.5313"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.9" x2="283.5" y1="128.5313" y2="128.5313"/><polygon fill="#A80036" points="264.9,126.1313,258.9,128.5313,264.9,130.9313,262.5,128.5313" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="262.5" y="117.8859">2</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="79.8" x="270.3" y="117.8859">Evaluate action event</text><path d="M13.8,137.5313 L51,137.5313 L51,141.7313 L45,147.7313 L13.8,147.7313 L13.8,137.5313 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="542.4047" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="508.5" x="13.8" y="137.5313"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="22.8" y="145.6723">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="2.4" x="60" y="145.1121">[</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45.6" x="62.4" y="145.1121">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="110.4" y="145.1121">exist]</text><polygon fill="#A80036" points="472.5,158.3039,478.5,160.7039,472.5,163.1039,474.9,160.7039" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.3" x2="476.1" y1="160.7039" y2="160.7039"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="262.5" y="157.8586">3</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="30" x="270.3" y="157.8586">Request</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51.6" x="302.7" y="157.8586">Event Object</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="359.1" y="157.8586">details</text><polygon fill="#FFFFE0" filter="url(#fn06orztovj2x)" points="471,186.5039,493.8,186.5039,499.8,193.1039,493.8,200.3039,471,200.3039,465,193.1039,471,186.5039" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="20.4" x="472.2" y="196.4449">event</text><path d="M261,206.4902 L261,249.0902 L378,249.0902 L378,212.4902 L372,206.4902 L261,206.4902 " fill="#D3D3D3" filter="url(#fn06orztovj2x)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M372,206.4902 L372,212.4902 L378,212.4902 L372,206.4902 " fill="#D3D3D3" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51.6" x="264.6" y="217.0313">Event Object</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="27.6" x="318.6" y="217.0313">details;</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="54.6" x="274.2" y="226.2176">Action details,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="91.8" x="274.2" y="235.4039">Hub notification details,</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="94.8" x="274.2" y="244.5902">DFSP notification details.</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.3" x2="283.5" y1="267.4219" y2="267.4219"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="283.5" x2="283.5" y1="267.4219" y2="275.2219"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.9" x2="283.5" y1="275.2219" y2="275.2219"/><polygon fill="#A80036" points="264.9,272.8219,258.9,275.2219,264.9,277.6219,262.5,275.2219" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="262.5" y="264.5766">4</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="101.4" x="270.3" y="264.5766">Prepare notification details</text><polygon fill="#A80036" points="472.5,290.4082,478.5,292.8082,472.5,295.2082,474.9,292.8082" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.3" x2="476.1" y1="292.8082" y2="292.8082"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="262.5" y="289.9629">5</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="30" x="270.3" y="289.9629">Request</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54.6" x="302.7" y="289.9629">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="31.2" x="359.7" y="289.9629">by same</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="51.6" x="393.3" y="289.9629">Event Object</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="25.2" x="447.3" y="289.9629">details</text><polygon fill="#FFFFE0" filter="url(#fn06orztovj2x)" points="469.8,318.6082,495.6,318.6082,501.6,325.2082,495.6,332.4082,469.8,332.4082,463.8,325.2082,469.8,318.6082" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="471" y="328.5492">action</text><path d="M19.8,339.7945 L57,339.7945 L57,343.9945 L51,349.9945 L19.8,349.9945 L19.8,339.7945 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="326.9684" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="496.5" x="19.8" y="339.7945"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="28.8" y="347.9356">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43.2" x="66" y="347.3754">[No previous</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45.6" x="111.6" y="347.3754">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="159.6" y="347.3754">with same event detail]</text><polygon fill="#A80036" points="472.5,360.5672,478.5,362.9672,472.5,365.3672,474.9,362.9672" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.3" x2="476.1" y1="362.9672" y2="362.9672"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="262.5" y="360.1219">6</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="19.2" x="270.3" y="360.1219">Store</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54.6" x="291.9" y="360.1219">Action Object</text><polygon fill="#FFFFE0" filter="url(#fn06orztovj2x)" points="469.8,370.7672,495.6,370.7672,501.6,377.3672,495.6,384.5672,469.8,384.5672,463.8,377.3672,469.8,370.7672" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="471" y="380.7082">action</text><polygon fill="#A80036" points="264.9,398.1399,258.9,400.5399,264.9,402.9399,262.5,400.5399" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="261.3" x2="482.1" y1="400.5399" y2="400.5399"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="268.5" y="397.6945">7</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="48.6" x="276.3" y="397.6945">Return result</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32.4" x="327.3" y="397.6945">actionId</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.3" x2="283.5" y1="418.1262" y2="418.1262"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="283.5" x2="283.5" y1="418.1262" y2="425.9262"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.9" x2="283.5" y1="425.9262" y2="425.9262"/><polygon fill="#A80036" points="264.9,423.5262,258.9,425.9262,264.9,428.3262,262.5,425.9262" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="262.5" y="415.2809">8</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="106.8" x="270.3" y="415.2809">Schedule reset repetition for</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32.4" x="379.5" y="415.2809">actionId</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="43.8" x="414.3" y="415.2809">as per rules</text><path d="M171.6,433.7262 L171.6,448.7262 L246.6,448.7262 L246.6,439.7262 L240.6,433.7262 L171.6,433.7262 " fill="#FFFF00" filter="url(#fn06orztovj2x)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M240.6,433.7262 L240.6,439.7262 L246.6,439.7262 L240.6,433.7262 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="62.4" x="175.2" y="444.2672">{from: "SYSTEM"}</text><polygon fill="#A80036" points="79.5,464.6988,73.5,467.0988,79.5,469.4988,77.1,467.0988" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="75.9" x2="251.7" y1="467.0988" y2="467.0988"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="5.4" x="83.1" y="464.2535">9</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="112.8" x="90.9" y="464.2535">Update topic with notification</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="19.8" x2="516.3" y1="490.4988" y2="490.4988"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="31.8" x="22.8" y="496.8797">[Previous</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45.6" x="57" y="496.8797">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="105" y="496.8797">with same event detail]</text><path d="M220.8,503.0719 L258,503.0719 L258,507.2719 L252,513.2719 L220.8,513.2719 L220.8,503.0719 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 0.6000000238418579;"/><rect fill="none" height="100.3184" style="stroke: #000000; stroke-width: 1.2000000476837158;" width="289.5" x="220.8" y="503.0719"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.2" x="229.8" y="511.2129">alt</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="151.2" x="267" y="510.6528">[Repetition and notification interval allowed]</text><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.3" x2="283.5" y1="526.2446" y2="526.2446"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="283.5" x2="283.5" y1="526.2446" y2="534.0446"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.9" x2="283.5" y1="534.0446" y2="534.0446"/><polygon fill="#A80036" points="264.9,531.6446,258.9,534.0446,264.9,536.4446,262.5,534.0446" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="262.5" y="523.3992">10</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="108" x="275.7" y="523.3992">Increment repetition counter</text><polygon fill="#A80036" points="472.5,549.2309,478.5,551.6309,472.5,554.0309,474.9,551.6309" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="258.3" x2="476.1" y1="551.6309" y2="551.6309"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="262.5" y="548.7856">11</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="26.4" x="275.7" y="548.7856">Update</text><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="54.6" x="304.5" y="548.7856">Action Object</text><polygon fill="#FFFFE0" filter="url(#fn06orztovj2x)" points="469.8,577.4309,495.6,577.4309,501.6,584.0309,495.6,591.2309,469.8,591.2309,463.8,584.0309,469.8,577.4309" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="23.4" x="471" y="587.3719">action</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="220.8" x2="510.3" y1="595.0172" y2="595.0172"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="164.4" x="223.8" y="601.3981">[Repetition and notification interval not allowed]</text><path d="M171.6,610.5903 L171.6,625.5903 L246.6,625.5903 L246.6,616.5903 L240.6,610.5903 L171.6,610.5903 " fill="#FFFF00" filter="url(#fn06orztovj2x)" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><path d="M240.6,610.5903 L240.6,616.5903 L246.6,616.5903 L240.6,610.5903 " fill="#FFFF00" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="62.4" x="175.2" y="621.1313">{from: "SYSTEM"}</text><polygon fill="#A80036" points="79.5,641.5629,73.5,643.9629,79.5,646.3629,77.1,643.9629" style="stroke: #A80036; stroke-width: 0.6000000238418579;"/><line style="stroke: #A80036; stroke-width: 0.6000000238418579;" x1="75.9" x2="251.7" y1="643.9629" y2="643.9629"/><text fill="#000000" font-family="sans-serif" font-size="7.8" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="10.8" x="83.1" y="641.1176">12</text><text fill="#000000" font-family="sans-serif" font-size="7.8" lengthAdjust="spacingAndGlyphs" textLength="112.8" x="96.3" y="641.1176">Update topic with notification</text><line style="stroke: #000000; stroke-width: 0.6000000238418579; stroke-dasharray: 2.0,2.0;" x1="13.8" x2="522.3" y1="671.5629" y2="671.5629"/><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="11.4" x="16.8" y="677.9438">[No</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45.6" x="30.6" y="677.9438">Action Object</text><text fill="#000000" font-family="sans-serif" font-size="6.6" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="18" x="78.6" y="677.9438">exist]</text><!--
@startuml
title 10.4. Notification Action Flow
autonumber

collections "Notification-Topic" as topicNotify
control "Central Event Processor" as CEP
control "Action Agent" as AA
database "CEP Store" as DB

box "Central Services" #LightYellow
participant topicNotify
end box
box "Central Event Processing Service" #LightGreen
participant CEP
participant AA
participant DB
end box

Group Action Flow
    activate CEP
    CEP -> AA: Action event
    activate AA
    AA -> AA: Evaluate action event

    alt **Action Object** exist
        AA -> DB: Request **Event Object**  details
        activate DB
        deactivate DB
        hnote over DB #LightYellow
            event
        end hnote
        note right of AA #LightGrey
            **Event Object** details;
                Action details,
                Hub notification details,
                DFSP notification details.
        end note
        AA -> AA: Prepare notification details
        AA -> DB: Request **Action Object** by same **Event Object** details
        activate DB
        deactivate DB
        hnote over DB #LightYellow
            action
        end hnote

        alt No previous **Action Object** with same event detail
            AA -> DB: Store **Action Object**
            activate DB
            hnote over DB #LightYellow
                action
            end hnote
            AA <- - DB: Return result **actionId**
            deactivate DB
            AA -> AA: Schedule reset repetition for **actionId** as per rules
            note left of AA #yellow
                {from: "SYSTEM"}
            end note
            topicNotify <- AA: Update topic with notification
            activate topicNotify
            deactivate topicNotify
        else Previous **Action Object** with same event detail

            alt Repetition and notification interval allowed
                AA -> AA: Increment repetition counter
                AA -> DB: Update **Action Object**
                activate DB
                hnote over DB #LightYellow
                    action
                end hnote
                deactivate DB
            else Repetition and notification interval not allowed
            end
            note left of AA #yellow
                {from: "SYSTEM"}
            end note
            topicNotify <- AA: Update topic with notification
            activate topicNotify
            deactivate topicNotify
        end
    else No **Action Object** exist
    deactivate AA
    end
    deactivate CEP
end
@enduml

PlantUML version 1.2018.11(Sat Sep 22 18:43:53 SAST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1343-b26
Operating System: Mac OS X
OS Version: 10.14.2
Default Encoding: UTF-8
Language: en
Country: ZA
--></g></svg>